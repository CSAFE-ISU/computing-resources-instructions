<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Pronto | CSAFE Computing Resources</title>
  <meta name="description" content="This book gives the reader step-by-step instuctions for accessing and using CSAFE computing resources." />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Pronto | CSAFE Computing Resources" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This book gives the reader step-by-step instuctions for accessing and using CSAFE computing resources." />
  <meta name="github-repo" content="CSAFE-ISU/computing-resources-instructions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Pronto | CSAFE Computing Resources" />
  
  <meta name="twitter:description" content="This book gives the reader step-by-step instuctions for accessing and using CSAFE computing resources." />
  

<meta name="author" content="Stephanie Reinders" />


<meta name="date" content="2022-06-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rstudio-server.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CSAFE Computing Resources</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#large-scale-storage-lss"><i class="fa fa-check"></i><b>1.1</b> Large Scale Storage (LSS)</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#csafe-rstudio-servers"><i class="fa fa-check"></i><b>1.2</b> CSAFE RStudio Servers</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-pronto-job-scheduler"><i class="fa fa-check"></i><b>1.3</b> The Pronto Job Scheduler</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#do-i-use-the-csafe-rstudio-server-or-pronto"><i class="fa fa-check"></i><b>1.4</b> Do I use the CSAFE Rstudio Server or Pronto?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#quick-start"><i class="fa fa-check"></i><b>2.1</b> Quick Start Guide</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started.html"><a href="getting-started.html#connect-to-large-scale-storage"><i class="fa fa-check"></i><b>2.1.1</b> Connect to Large Scale Storage</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started.html"><a href="getting-started.html#connect-to-csafe-rstudio-server"><i class="fa fa-check"></i><b>2.1.2</b> Connect to CSAFE Rstudio Server</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-started.html"><a href="getting-started.html#connect-to-the-pronto-job-scheduler"><i class="fa fa-check"></i><b>2.1.3</b> Connect to the Pronto Job Scheduler</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#off-campus"><i class="fa fa-check"></i><b>2.2</b> Working Off Campus</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started.html"><a href="getting-started.html#install-vpn"><i class="fa fa-check"></i><b>2.2.1</b> Install the ISU Virtual Private Network (VPN)</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-started.html"><a href="getting-started.html#ssh-keys"><i class="fa fa-check"></i><b>2.2.2</b> Generate SSH keys</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lss.html"><a href="lss.html"><i class="fa fa-check"></i><b>3</b> Large Scale Storage (LSS)</a></li>
<li class="chapter" data-level="4" data-path="rstudio-server.html"><a href="rstudio-server.html"><i class="fa fa-check"></i><b>4</b> The CSAFE RStudio Servers</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rstudio-server.html"><a href="rstudio-server.html#connect-to-an-rstudio-server"><i class="fa fa-check"></i><b>4.1</b> Connect to an RStudio Server</a></li>
<li class="chapter" data-level="4.2" data-path="rstudio-server.html"><a href="rstudio-server.html#working-with-directories-and-file-paths"><i class="fa fa-check"></i><b>4.2</b> Working with Directories and File Paths</a></li>
<li class="chapter" data-level="4.3" data-path="rstudio-server.html"><a href="rstudio-server.html#trouble-shooting"><i class="fa fa-check"></i><b>4.3</b> Trouble Shooting</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pronto.html"><a href="pronto.html"><i class="fa fa-check"></i><b>5</b> Pronto</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pronto.html"><a href="pronto.html#connecting-to-pronto"><i class="fa fa-check"></i><b>5.1</b> Connecting to the Pronto job scheduler</a></li>
<li class="chapter" data-level="5.2" data-path="pronto.html"><a href="pronto.html#prontodtn"><i class="fa fa-check"></i><b>5.2</b> Connecting to the Pronto data transfer node</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="pronto.html"><a href="pronto.html#transfering-data-from-prontodtn-to-lss"><i class="fa fa-check"></i><b>5.2.1</b> Transfering data from ProntoDTN to LSS</a></li>
<li class="chapter" data-level="5.2.2" data-path="pronto.html"><a href="pronto.html#transfering-large-amounts-of-data-using-globus"><i class="fa fa-check"></i><b>5.2.2</b> Transfering large amounts of data using Globus</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="pronto.html"><a href="pronto.html#running-an-r-script-on-pronto"><i class="fa fa-check"></i><b>5.3</b> Running an R script on Pronto</a></li>
<li class="chapter" data-level="5.4" data-path="pronto.html"><a href="pronto.html#interactive-sessions"><i class="fa fa-check"></i><b>5.4</b> Interactive Sessions</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="pronto.html"><a href="pronto.html#ex-start-interactive"><i class="fa fa-check"></i><b>5.4.1</b> Example: Start an interactive session</a></li>
<li class="chapter" data-level="5.4.2" data-path="pronto.html"><a href="pronto.html#ex-interactive-install"><i class="fa fa-check"></i><b>5.4.2</b> Example: Install a package from CRAN</a></li>
<li class="chapter" data-level="5.4.3" data-path="pronto.html"><a href="pronto.html#ex-interactive-install-github"><i class="fa fa-check"></i><b>5.4.3</b> Example: Install a package from Github</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="pronto.html"><a href="pronto.html#batch-jobs"><i class="fa fa-check"></i><b>5.5</b> Batch Jobs</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="pronto.html"><a href="pronto.html#ex-basic"><i class="fa fa-check"></i><b>5.5.1</b> Example: A basic R script</a></li>
<li class="chapter" data-level="5.5.2" data-path="pronto.html"><a href="pronto.html#ex-save"><i class="fa fa-check"></i><b>5.5.2</b> Example: Save a dataframe to a CSV file</a></li>
<li class="chapter" data-level="5.5.3" data-path="pronto.html"><a href="pronto.html#ex-load"><i class="fa fa-check"></i><b>5.5.3</b> Example: Load data from a CSV file</a></li>
<li class="chapter" data-level="5.5.4" data-path="pronto.html"><a href="pronto.html#ex-batch-install"><i class="fa fa-check"></i><b>5.5.4</b> Example: Install R packages</a></li>
<li class="chapter" data-level="5.5.5" data-path="pronto.html"><a href="pronto.html#ex-parallel"><i class="fa fa-check"></i><b>5.5.5</b> Example: Run code in parallel</a></li>
<li class="chapter" data-level="5.5.6" data-path="pronto.html"><a href="pronto.html#ex-seed"><i class="fa fa-check"></i><b>5.5.6</b> Example: Set the seed for the random number generator</a></li>
<li class="chapter" data-level="5.5.7" data-path="pronto.html"><a href="pronto.html#ex-packages-parallel"><i class="fa fa-check"></i><b>5.5.7</b> Example: Use functions from dplyr and magrittr in parallel</a></li>
<li class="chapter" data-level="5.5.8" data-path="pronto.html"><a href="pronto.html#example-use-a-user-defined-function-to-save-results-inside-a-parallel-loop"><i class="fa fa-check"></i><b>5.5.8</b> Example: Use a user-defined function to save results inside a parallel loop</a></li>
<li class="chapter" data-level="5.5.9" data-path="pronto.html"><a href="pronto.html#ex-log"><i class="fa fa-check"></i><b>5.5.9</b> Example: Create a log file</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="pronto.html"><a href="pronto.html#pronto-commands"><i class="fa fa-check"></i><b>5.6</b> Pronto Commands</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="pronto.html"><a href="pronto.html#list-loaded-modules"><i class="fa fa-check"></i><b>5.6.1</b> List loaded modules</a></li>
<li class="chapter" data-level="5.6.2" data-path="pronto.html"><a href="pronto.html#purge-all-loaded-modules"><i class="fa fa-check"></i><b>5.6.2</b> Purge all loaded modules</a></li>
<li class="chapter" data-level="5.6.3" data-path="pronto.html"><a href="pronto.html#view-your-jobs-in-the-pronto-queue"><i class="fa fa-check"></i><b>5.6.3</b> View your job(s) in the Pronto queue</a></li>
<li class="chapter" data-level="5.6.4" data-path="pronto.html"><a href="pronto.html#cancel-a-job"><i class="fa fa-check"></i><b>5.6.4</b> Cancel a job</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="pronto.html"><a href="pronto.html#install-the-handwriter-package"><i class="fa fa-check"></i><b>5.7</b> Install the handwriter package</a></li>
<li class="chapter" data-level="5.8" data-path="pronto.html"><a href="pronto.html#trouble-shooting-1"><i class="fa fa-check"></i><b>5.8</b> Trouble-Shooting</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="pronto.html"><a href="pronto.html#ex-line-breaks"><i class="fa fa-check"></i><b>5.8.1</b> Line breaks error</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CSAFE Computing Resources</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pronto" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Pronto<a href="pronto.html#pronto" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="connecting-to-pronto" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Connecting to the Pronto job scheduler<a href="pronto.html#connecting-to-pronto" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You connect to the pronto job scheduler through the PowerShell on Windows or the Terminal on Mac.</p>
<p><strong>Windows</strong></p>
<ol style="list-style-type: decimal">
<li><p>Type <code>powershell</code> in the Windows Search Bar next to the Start Menu
<br></p>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/windows_search_bar.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li><p>Click Windows PowerShell in the list to open the PowerShell
<br></p>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/powershell.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li><p>Type <code>ssh your_netid@pronto.las.iastate.edu</code>
<br></p>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/ssh_to_pronto.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li><p>Type your net-id password</p></li>
<li><p>You should now see</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="pronto.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[your_netid@pronto</span> ~]$</span></code></pre></div></li>
</ol>
<p><strong>Mac</strong></p>
<ol style="list-style-type: decimal">
<li>Do a spotlight search by clicking on the magnifying glass in the upper right corner of the screen <br>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/spotlight.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li>Type <code>terminal</code> and click Terminal in the list <br>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/search_terminal.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li>In the Terminal widow, type <code>ssh your_netid@pronto.las.iastate.edu</code> <br>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/mac_terminal.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li>Type your net-id password</li>
</ol>
</div>
<div id="prontodtn" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Connecting to the Pronto data transfer node<a href="pronto.html#prontodtn" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You need to transfer your data to Pronto using the Pronto data transfer node (ProntoDTN). CSAFE has a folder for CSAFE users on ProntoDTN. The file path is <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab</code>. Create a folder for yourself in the csafe-lab folder. Most users use their net-id as the folder name, but I think you can name it anything you want.</p>
<p>The work directory is not backed-up so don’t use this folder for long term storage.</p>
<p>Each user also has a home folder. These folders have limited storage so researchIT recommends only placing small files in the home folder. I find it easier to store everything in my work folder and not use my home folder at all.</p>
<p><strong>Windows</strong></p>
<ol style="list-style-type: decimal">
<li>Open file explorer</li>
<li>Type <code>\\prontodtn.las.iastate.edu</code> in the top textbox <br>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/explorer.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li>Open the work folder</li>
<li>Open the LAS folder</li>
<li>Open the csafe-lab folder</li>
<li>Create a new folder with your net-id as the name</li>
</ol>
<p><strong>Mac</strong></p>
<ol style="list-style-type: decimal">
<li>Select Go &gt; Connect to Server <br>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/connect_to_server.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li>Type <code>smb://prontodtn.las.iastate.edu</code> in the text box. Click the + sign if you would like your computer to remember the server. <br>
<div style="margin-bottom:10px; margin-top:10px">
<p><img src="images/add_server.png" id="id" class="class" style="width:50.0%;height:50.0%" /></p>
</div></li>
<li>Click Connect</li>
<li>Enter your net-id and password</li>
<li>Select Work and click OK.</li>
<li>Open the LAS folder</li>
<li>Open the csafe-lab folder</li>
<li>Create a new folder with your net-id as the name</li>
</ol>
<div id="transfering-data-from-prontodtn-to-lss" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Transfering data from ProntoDTN to LSS<a href="pronto.html#transfering-data-from-prontodtn-to-lss" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li></li>
</ol>
</div>
<div id="transfering-large-amounts-of-data-using-globus" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Transfering large amounts of data using Globus<a href="pronto.html#transfering-large-amounts-of-data-using-globus" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you have large amounts of data to transfer, researchIT recommends that you use Globus Connect Personal. Go to <a href="https://researchit.las.iastate.edu/how-transfer-files-pronto-globus" class="uri">https://researchit.las.iastate.edu/how-transfer-files-pronto-globus</a> to download Globus.</p>
<p>Instructions for transferring data with Globus are here: <a href="https://docs.globus.org/how-to/get-started/" class="uri">https://docs.globus.org/how-to/get-started/</a>.</p>
</div>
</div>
<div id="running-an-r-script-on-pronto" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Running an R script on Pronto<a href="pronto.html#running-an-r-script-on-pronto" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are two ways to run a script on Pronto:</p>
<ol style="list-style-type: decimal">
<li>in an interactive session</li>
<li>as a batch job</li>
</ol>
<p>If I understand correctly, an interactive session is intended for troubleshooting your code. ResearchIT says, “Once you’ve got your program running in an interactive session please switch to an sbatch script if possible.” [<a href="https://researchit.las.iastate.edu/pronto?msclkid=3263c889c17811ec81e13068586d8872" class="uri">https://researchit.las.iastate.edu/pronto?msclkid=3263c889c17811ec81e13068586d8872</a>]</p>
<p>Pronto uses the Simple Linux Utility for Resource Management (Slurm) to allocate resources (computer nodes and clusters) to users [<a href="https://en.wikipedia.org/wiki/Slurm_Workload_Manager" class="uri">https://en.wikipedia.org/wiki/Slurm_Workload_Manager</a>]. In order to run your script as a batch job, you need to write a Slurm file that includes information about your job and the resources your would like to request.</p>
</div>
<div id="interactive-sessions" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Interactive Sessions<a href="pronto.html#interactive-sessions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="ex-start-interactive" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Example: Start an interactive session<a href="pronto.html#ex-start-interactive" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>In the Pronto terminal, type</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="pronto.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> srun <span class="at">--nodes</span> 1 <span class="at">--tasks</span> 4 <span class="at">--partition</span> interactive <span class="at">--time</span> 01:00:00 <span class="at">--pty</span> bash</span></code></pre></div>
<p>This starts an interactive session.</p></li>
<li><p>Load the module for R version 4.0.4. This version of R requires that a specific version of gcc be loaded first.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="pronto.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> module load gcc/10.2.0-zuvaafu</span>
<span id="cb3-2"><a href="pronto.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> module load r/4.0.4-py3-4khjixy</span></code></pre></div></li>
<li><p>Tell Pronto to install R packages in your csafe-lab work folder. (This is considered the best practice by ResearchIT <a href="https://researchit.las.iastate.edu/how-run-r-pronto?msclkid=865a487bc65e11ecbfd7e59a7ab1dc47" class="uri">https://researchit.las.iastate.edu/how-run-r-pronto?msclkid=865a487bc65e11ecbfd7e59a7ab1dc47</a>.)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="pronto.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> export R_LIBS_USER=/work/LAS/your-lab/yournetid/Rlibs</span>
<span id="cb4-2"><a href="pronto.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> <span class="va">$R_LIBS_USER</span></span></code></pre></div></li>
<li><p>Start the R interpreter</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="pronto.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> R</span></code></pre></div></li>
</ol>
</div>
<div id="ex-interactive-install" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Example: Install a package from CRAN<a href="pronto.html#ex-interactive-install" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Start an interactive R session (see <a href="pronto.html#ex-start-interactive">5.4.1</a>)</li>
<li><div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="pronto.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> install.packages<span class="kw">(</span><span class="st">&quot;dplyr&quot;</span><span class="ex">,lib=</span><span class="st">&quot;/work/LAS/csafe-lab/your_netid/Rlibs&quot;</span><span class="ex">,</span> repos=<span class="st">&quot;https://mirror.las.iastate.edu/CRAN&quot;</span><span class="kw">)</span></span></code></pre></div></li>
</ol>
</div>
<div id="ex-interactive-install-github" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Example: Install a package from Github<a href="pronto.html#ex-interactive-install-github" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Occasionally, you might want to install a package that isn’t available on CRAN but is available on GitHub. This example shows how to do that on Pronto.</p>
<ol style="list-style-type: decimal">
<li><p>Start an interactive R session (see <a href="pronto.html#ex-start-interactive">5.4.1</a>)</p></li>
<li><p>If you haven’t already, you need to install the devtools package</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="pronto.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> install.packages<span class="kw">(</span><span class="st">&quot;devtools&quot;</span><span class="ex">,lib=</span><span class="st">&quot;/work/LAS/csafe-lab/your_netid/Rlibs&quot;</span><span class="ex">,</span> repos=<span class="st">&quot;https://mirror.las.iastate.edu/CRAN&quot;</span><span class="kw">)</span></span></code></pre></div></li>
<li><p>Every GitHub repository url has the format <a href="https://github.com/GithubUsernam/GithubRepo" class="uri">https://github.com/GithubUsernam/GithubRepo</a>. Use the GithubUsername/GithubRepo in the install_github function.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="pronto.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> devtools::install_github<span class="kw">(</span><span class="st">&quot;GithubUsername/GithubRepo&quot;</span><span class="kw">)</span></span></code></pre></div></li>
</ol>
</div>
</div>
<div id="batch-jobs" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Batch Jobs<a href="pronto.html#batch-jobs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="ex-basic" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Example: A basic R script<a href="pronto.html#ex-basic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="pronto.html#cb9-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb9-2"><a href="pronto.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a)</span></code></pre></div>
<p>Save the script as <code>basic.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="pronto.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb10-2"><a href="pronto.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="pronto.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb10-4"><a href="pronto.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=1  # ask for 1 cpu</span></span>
<span id="cb10-5"><a href="pronto.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb10-6"><a href="pronto.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb10-7"><a href="pronto.html#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="pronto.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb10-9"><a href="pronto.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb10-10"><a href="pronto.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb10-11"><a href="pronto.html#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="pronto.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb10-13"><a href="pronto.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb10-14"><a href="pronto.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> basic.R</span></code></pre></div>
<p>Save the file as <code>basic.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix basic.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="pronto.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/basic.txt</span></code></pre></div>
<p>This will add your job to the queue. The script is so short, your job will probably run immediately.</p></li>
<li><p>Two new files – <code>job_&lt;job#&gt;_err.txt</code> and <code>job_&lt;job#&gt;_out.txt</code> – should appear in your csafe-lab work folder. If <code>basic.R</code> ran successfully, the <code>job_&lt;job#&gt;_out</code> file should contain</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="pronto.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> a <span class="ex">=</span> 5</span>
<span id="cb12-2"><a href="pronto.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> print<span class="kw">(</span><span class="ex">a</span><span class="kw">)</span></span>
<span id="cb12-3"><a href="pronto.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[1]</span> 5</span>
<span id="cb12-4"><a href="pronto.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> </span></code></pre></div>
<p>and <code>job_&lt;job#&gt;_err.txt</code> should be blank. If the error file isn’t blank, troubleshoot the error(s). If you get stuck, email <a href="mailto:researchit@iastate.edu" class="email">researchit@iastate.edu</a>.</p></li>
</ol>
</div>
<div id="ex-save" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Example: Save a dataframe to a CSV file<a href="pronto.html#ex-save" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this example, I will show you how to save a dataframe to a csv file.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="pronto.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># draw 10 samples from normal distribution</span></span>
<span id="cb13-2"><a href="pronto.html#cb13-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb13-3"><a href="pronto.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="pronto.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># put in a dataframe</span></span>
<span id="cb13-5"><a href="pronto.html#cb13-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">x=</span>data)</span>
<span id="cb13-6"><a href="pronto.html#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="pronto.html#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># save dataframe</span></span>
<span id="cb13-8"><a href="pronto.html#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df, <span class="st">&quot;data.csv&quot;</span>)</span></code></pre></div>
<p>Save the script as <code>dataframe.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="pronto.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb14-2"><a href="pronto.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="pronto.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb14-4"><a href="pronto.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=1  # ask for 1 cpu</span></span>
<span id="cb14-5"><a href="pronto.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb14-6"><a href="pronto.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb14-7"><a href="pronto.html#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="pronto.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb14-9"><a href="pronto.html#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb14-10"><a href="pronto.html#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb14-11"><a href="pronto.html#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="pronto.html#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb14-13"><a href="pronto.html#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb14-14"><a href="pronto.html#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> dataframe.R</span></code></pre></div>
<p>Save the file as <code>dataframe.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix dataframe.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="pronto.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/dataframe.txt</span></code></pre></div>
<p>This will add your job to the queue. The script is so short, your job will probably run immediately.</p></li>
<li><p>The dataframe should be saved in a file <code>data.csv</code> in your csafe-lab work folder. There should be two other new files – <code>data.csv</code>, <code>job_&lt;job#&gt;_err.txt</code> and <code>job_&lt;job#&gt;_out.txt</code> – in your csafe-lab work folder as well. If the error file isn’t blank, troubleshoot the error(s). If you get stuck, email <a href="mailto:researchit@iastate.edu" class="email">researchit@iastate.edu</a>.</p></li>
</ol>
</div>
<div id="ex-load" class="section level3 hasAnchor" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Example: Load data from a CSV file<a href="pronto.html#ex-load" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this example, we will load the csv file <code>data.csv</code> that we saved in Example <a href="pronto.html#ex-save">5.5.2</a>.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Double-check that the file <code>data.csv</code> is still in your csafe-lab work folder. If you deleted it, follow the steps in example <a href="pronto.html#ex-save">5.5.2</a> to recreate it.</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="pronto.html#cb16-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&quot;data.csv&quot;</span>)</span>
<span id="cb16-2"><a href="pronto.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<p>Save the script as <code>load.R</code> and copy it to you csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="pronto.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb17-2"><a href="pronto.html#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="pronto.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb17-4"><a href="pronto.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=1  # ask for 1 cpu</span></span>
<span id="cb17-5"><a href="pronto.html#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb17-6"><a href="pronto.html#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb17-7"><a href="pronto.html#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="pronto.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb17-9"><a href="pronto.html#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb17-10"><a href="pronto.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb17-11"><a href="pronto.html#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="pronto.html#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb17-13"><a href="pronto.html#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb17-14"><a href="pronto.html#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> load.R</span></code></pre></div>
<p>Save the file as <code>load.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix load.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="pronto.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/load.txt</span></code></pre></div>
<p>This will add your job to the queue. The script is so short, your job will probably run immediately.</p></li>
<li><p>Open the file <code>job_&lt;job#&gt;_out.txt</code> in your csafe-lab work folder and make sure that the first six lines of the dataframe were printed.</p></li>
</ol>
</div>
<div id="ex-batch-install" class="section level3 hasAnchor" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> Example: Install R packages<a href="pronto.html#ex-batch-install" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Just like in Rstudio on your local machine, you will need to install any R packages that you want use. In this example, we will install futile.logger, doParallel, doRNG, and tidyverse so that we can use these packages in future examples.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="pronto.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;futile.logger&quot;</span>, </span>
<span id="cb19-2"><a href="pronto.html#cb19-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;doParallel&quot;</span>, </span>
<span id="cb19-3"><a href="pronto.html#cb19-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;doRNG&quot;</span>,</span>
<span id="cb19-4"><a href="pronto.html#cb19-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;tidyverse&quot;</span>), </span>
<span id="cb19-5"><a href="pronto.html#cb19-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">lib=</span><span class="st">&quot;/work/LAS/csafe-lab/your_netid/Rlibs&quot;</span>, </span>
<span id="cb19-6"><a href="pronto.html#cb19-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">repos=</span><span class="st">&quot;https://mirror.las.iastate.edu/CRAN&quot;</span>)</span></code></pre></div>
<p>The line starting with <code>lib=</code> tells Pronto to install the R packages in your csafe-lab work folder. The line starting with <code>repos=</code> tells Pronto which CRAN mirror to use. ResearchIT says that these two lines should always be used [<a href="https://researchit.las.iastate.edu/how-run-r-pronto" class="uri">https://researchit.las.iastate.edu/how-run-r-pronto</a>]. Save the script as <code>install_packages.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="pronto.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb20-2"><a href="pronto.html#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="pronto.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb20-4"><a href="pronto.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=1  # ask for 1 cpu</span></span>
<span id="cb20-5"><a href="pronto.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb20-6"><a href="pronto.html#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb20-7"><a href="pronto.html#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="pronto.html#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb20-9"><a href="pronto.html#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb20-10"><a href="pronto.html#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb20-11"><a href="pronto.html#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="pronto.html#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">R_LIBS_USER</span><span class="op">=</span>/work/LAS/csafe-lab/your_netid/Rlibs</span>
<span id="cb20-13"><a href="pronto.html#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$R_LIBS_USER</span></span>
<span id="cb20-14"><a href="pronto.html#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="pronto.html#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb20-16"><a href="pronto.html#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb20-17"><a href="pronto.html#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> install_packages.R</span></code></pre></div>
<p>Save the file as <code>install_packages.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix install_packages.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="pronto.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/install_packages.txt</span></code></pre></div>
<p>This will add your job to the queue. Just like on your local machine, it might take several minutes to install the packages.</p></li>
<li><p>There should be two other new files – <code>data.csv</code>, <code>job_&lt;job#&gt;_err.txt</code> and <code>job_&lt;job#&gt;_out.txt</code> – in your csafe-lab work folder.</p></li>
</ol>
</div>
<div id="ex-parallel" class="section level3 hasAnchor" number="5.5.5">
<h3><span class="header-section-number">5.5.5</span> Example: Run code in parallel<a href="pronto.html#ex-parallel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The main benefit of Pronto is that it can run code in parallel. In this example, I will show you how to run a for loop in parallel using the doParallel library. R has other packages for parallel computing, but ResearchIT uses doParallel in their how-to [<a href="https://researchit.las.iastate.edu/how-run-r-pronto" class="uri">https://researchit.las.iastate.edu/how-run-r-pronto</a>] so that’s what I will use here.</p>
<p>If you completed Example <a href="pronto.html#ex-batch-install">5.5.4</a> the doParallel package will already be installed. If you need to install the doParallel package see Examples <a href="pronto.html#ex-interactive-install">5.4.2</a> or <a href="pronto.html#ex-batch-install">5.5.4</a> for instructions.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="pronto.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb22-2"><a href="pronto.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="pronto.html#cb22-3" aria-hidden="true" tabindex="-1"></a>nCores <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="fu">Sys.getenv</span>(<span class="st">&quot;SLURM_CPUS_PER_TASK&quot;</span>))</span>
<span id="cb22-4"><a href="pronto.html#cb22-4" aria-hidden="true" tabindex="-1"></a>myCluster <span class="ot">=</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(nCores)</span>
<span id="cb22-5"><a href="pronto.html#cb22-5" aria-hidden="true" tabindex="-1"></a>doParallel<span class="sc">::</span><span class="fu">registerDoParallel</span>(myCluster)</span>
<span id="cb22-6"><a href="pronto.html#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="pronto.html#cb22-7" aria-hidden="true" tabindex="-1"></a>results <span class="ot">=</span> <span class="fu">foreach</span>(<span class="at">i=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%dopar%</span> {</span>
<span id="cb22-8"><a href="pronto.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rnorm</span>(<span class="dv">1000</span>)}</span>
<span id="cb22-9"><a href="pronto.html#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(results, <span class="st">&quot;parallel_results.rds&quot;</span>)</span></code></pre></div>
<p>Save the script as <code>parallel.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="pronto.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb23-2"><a href="pronto.html#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="pronto.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb23-4"><a href="pronto.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=10  # ask for 10 cpu</span></span>
<span id="cb23-5"><a href="pronto.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb23-6"><a href="pronto.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb23-7"><a href="pronto.html#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="pronto.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb23-9"><a href="pronto.html#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb23-10"><a href="pronto.html#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb23-11"><a href="pronto.html#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="pronto.html#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">R_LIBS_USER</span><span class="op">=</span>/work/LAS/csafe-lab/your_netid/Rlibs</span>
<span id="cb23-13"><a href="pronto.html#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="pronto.html#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb23-15"><a href="pronto.html#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb23-16"><a href="pronto.html#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> parallel.R</span></code></pre></div>
<p>Save the file as <code>parallel.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix parallel.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="pronto.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/parallel.txt</span></code></pre></div></li>
<li><p>The results of the parallel loop should be saved in <code>parallel.txt</code> in your csafe-lab work folder.</p></li>
</ol>
</div>
<div id="ex-seed" class="section level3 hasAnchor" number="5.5.6">
<h3><span class="header-section-number">5.5.6</span> Example: Set the seed for the random number generator<a href="pronto.html#ex-seed" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you run Example <a href="pronto.html#ex-parallel">5.5.5</a> multiple times, the numbers sampled from the normal distribution will likely be different each time. If you want to make the sample reproducible
(produce the same sample each time), set the seed for the random number generator. The most common way to set a seed is with the <code>set.seed()</code> function. This function does not work with <code>%dopar%</code> from the doParallel package, but it does work with <code>%dorng%</code>.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="pronto.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb25-2"><a href="pronto.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doRNG)</span>
<span id="cb25-3"><a href="pronto.html#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="pronto.html#cb25-4" aria-hidden="true" tabindex="-1"></a>nCores <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="fu">Sys.getenv</span>(<span class="st">&quot;SLURM_CPUS_PER_TASK&quot;</span>))</span>
<span id="cb25-5"><a href="pronto.html#cb25-5" aria-hidden="true" tabindex="-1"></a>myCluster <span class="ot">=</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(nCores)</span>
<span id="cb25-6"><a href="pronto.html#cb25-6" aria-hidden="true" tabindex="-1"></a>doParallel<span class="sc">::</span><span class="fu">registerDoParallel</span>(myCluster)</span>
<span id="cb25-7"><a href="pronto.html#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="pronto.html#cb25-8" aria-hidden="true" tabindex="-1"></a>starting_seed <span class="ot">=</span> <span class="dv">300</span></span>
<span id="cb25-9"><a href="pronto.html#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="pronto.html#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(starting_seed)</span>
<span id="cb25-11"><a href="pronto.html#cb25-11" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">=</span> <span class="fu">foreach</span>(<span class="at">i=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">%dorng%</span>{ <span class="fu">runif</span>(<span class="dv">1</span>) }</span>
<span id="cb25-12"><a href="pronto.html#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="pronto.html#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(starting_seed)</span>
<span id="cb25-14"><a href="pronto.html#cb25-14" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">=</span> <span class="fu">foreach</span>(<span class="at">i=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">%dorng%</span>{ <span class="fu">runif</span>(<span class="dv">1</span>) }</span>
<span id="cb25-15"><a href="pronto.html#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(r1, r2)</span></code></pre></div>
<p>Save the script as <code>seed.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="pronto.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb26-2"><a href="pronto.html#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="pronto.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb26-4"><a href="pronto.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=10  # ask for 10 cpu</span></span>
<span id="cb26-5"><a href="pronto.html#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb26-6"><a href="pronto.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb26-7"><a href="pronto.html#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="pronto.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb26-9"><a href="pronto.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb26-10"><a href="pronto.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb26-11"><a href="pronto.html#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="pronto.html#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">R_LIBS_USER</span><span class="op">=</span>/work/LAS/csafe-lab/your_netid/Rlibs</span>
<span id="cb26-13"><a href="pronto.html#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="pronto.html#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb26-15"><a href="pronto.html#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb26-16"><a href="pronto.html#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> seed.R</span></code></pre></div>
<p>Save the file as <code>seed.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix seed.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="pronto.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/seed.txt</span></code></pre></div></li>
<li><p>Open the <code>job_&lt;job#&gt;_out.txt</code> file to make sure that the result of <code>identical(r1, r2)</code> is <code>TRUE</code>.</p></li>
</ol>
</div>
<div id="ex-packages-parallel" class="section level3 hasAnchor" number="5.5.7">
<h3><span class="header-section-number">5.5.7</span> Example: Use functions from dplyr and magrittr in parallel<a href="pronto.html#ex-packages-parallel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The previous parallel examples used the base R functions <code>rnorm</code> and <code>runif</code>. If we want to use
functions from packages that we install, we need to pass the package names to the <code>%dorng%</code> operator. We will learn how to do this in this example.</p>
<p>If you haven’t already installed the <code>tidyverse</code> package, follow the steps in Example 4 to install the <code>tidyverse</code> or install <code>dplyr</code> and <code>magrittr</code> separately.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="pronto.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb28-2"><a href="pronto.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doRNG)</span>
<span id="cb28-3"><a href="pronto.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb28-4"><a href="pronto.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb28-5"><a href="pronto.html#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="pronto.html#cb28-6" aria-hidden="true" tabindex="-1"></a>nCores <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="fu">Sys.getenv</span>(<span class="st">&quot;SLURM_CPUS_PER_TASK&quot;</span>))</span>
<span id="cb28-7"><a href="pronto.html#cb28-7" aria-hidden="true" tabindex="-1"></a>myCluster <span class="ot">=</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(nCores)</span>
<span id="cb28-8"><a href="pronto.html#cb28-8" aria-hidden="true" tabindex="-1"></a>doParallel<span class="sc">::</span><span class="fu">registerDoParallel</span>(myCluster)</span>
<span id="cb28-9"><a href="pronto.html#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="pronto.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb28-11"><a href="pronto.html#cb28-11" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">=</span> <span class="fu">foreach</span>(<span class="at">i=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.packages=</span><span class="fu">c</span>(<span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;magrittr&quot;</span>)) <span class="sc">%dorng%</span>{ </span>
<span id="cb28-12"><a href="pronto.html#cb28-12" aria-hidden="true" tabindex="-1"></a>  cluster_centers <span class="ot">=</span> df <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">40</span>)</span>
<span id="cb28-13"><a href="pronto.html#cb28-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-14"><a href="pronto.html#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="pronto.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb28-16"><a href="pronto.html#cb28-16" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">=</span> <span class="fu">foreach</span>(<span class="at">i=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.packages=</span><span class="fu">c</span>(<span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;magrittr&quot;</span>)) <span class="sc">%dorng%</span>{ </span>
<span id="cb28-17"><a href="pronto.html#cb28-17" aria-hidden="true" tabindex="-1"></a>  cluster_centers <span class="ot">=</span> df <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">40</span>)</span>
<span id="cb28-18"><a href="pronto.html#cb28-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-19"><a href="pronto.html#cb28-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-20"><a href="pronto.html#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">200</span>)</span>
<span id="cb28-21"><a href="pronto.html#cb28-21" aria-hidden="true" tabindex="-1"></a>r3 <span class="ot">=</span> <span class="fu">foreach</span>(<span class="at">i=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.packages=</span><span class="fu">c</span>(<span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;magrittr&quot;</span>)) <span class="sc">%dorng%</span>{ </span>
<span id="cb28-22"><a href="pronto.html#cb28-22" aria-hidden="true" tabindex="-1"></a>  cluster_centers <span class="ot">=</span> df <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">40</span>)</span>
<span id="cb28-23"><a href="pronto.html#cb28-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-24"><a href="pronto.html#cb28-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-25"><a href="pronto.html#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(r1, r2)</span>
<span id="cb28-26"><a href="pronto.html#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(r1, r3)</span></code></pre></div>
<p>Save the script as <code>magrittr.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="pronto.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb29-2"><a href="pronto.html#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="pronto.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb29-4"><a href="pronto.html#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=10  # ask for 10 cpu</span></span>
<span id="cb29-5"><a href="pronto.html#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb29-6"><a href="pronto.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb29-7"><a href="pronto.html#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="pronto.html#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb29-9"><a href="pronto.html#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb29-10"><a href="pronto.html#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb29-11"><a href="pronto.html#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="pronto.html#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">R_LIBS_USER</span><span class="op">=</span>/work/LAS/csafe-lab/your_netid/Rlibs</span>
<span id="cb29-13"><a href="pronto.html#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="pronto.html#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb29-15"><a href="pronto.html#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb29-16"><a href="pronto.html#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> magrittr.R</span></code></pre></div>
<p>Save the file as <code>magrittr.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix magrittr.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="pronto.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/magrittr.txt</span></code></pre></div></li>
<li><p>Open the <code>job_&lt;job#&gt;_out.txt</code> file to make sure that the result of <code>identical(r1, r2)</code> is <code>TRUE</code> and <code>identical(r1, r3)</code> is <code>FALSE</code>.</p></li>
</ol>
</div>
<div id="example-use-a-user-defined-function-to-save-results-inside-a-parallel-loop" class="section level3 hasAnchor" number="5.5.8">
<h3><span class="header-section-number">5.5.8</span> Example: Use a user-defined function to save results inside a parallel loop<a href="pronto.html#example-use-a-user-defined-function-to-save-results-inside-a-parallel-loop" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="pronto.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb31-2"><a href="pronto.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doRNG)</span>
<span id="cb31-3"><a href="pronto.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;parallel_save.R&quot;</span>)</span>
<span id="cb31-4"><a href="pronto.html#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="pronto.html#cb31-5" aria-hidden="true" tabindex="-1"></a>nCores <span class="ot">=</span> <span class="fu">as.integer</span>(<span class="fu">Sys.getenv</span>(<span class="st">&quot;SLURM_CPUS_PER_TASK&quot;</span>))</span>
<span id="cb31-6"><a href="pronto.html#cb31-6" aria-hidden="true" tabindex="-1"></a>myCluster <span class="ot">=</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(nCores)</span>
<span id="cb31-7"><a href="pronto.html#cb31-7" aria-hidden="true" tabindex="-1"></a>doParallel<span class="sc">::</span><span class="fu">registerDoParallel</span>(myCluster)</span>
<span id="cb31-8"><a href="pronto.html#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="pronto.html#cb31-9" aria-hidden="true" tabindex="-1"></a>starting_seed <span class="ot">=</span> <span class="dv">300</span></span>
<span id="cb31-10"><a href="pronto.html#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="pronto.html#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(starting_seed)</span>
<span id="cb31-12"><a href="pronto.html#cb31-12" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">=</span> <span class="fu">foreach</span>(<span class="at">i=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%dorng%</span> {</span>
<span id="cb31-13"><a href="pronto.html#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">save_sample</span>(<span class="at">n=</span><span class="dv">10000</span>, <span class="at">filename=</span><span class="fu">paste0</span>(<span class="st">&quot;sample_&quot;</span>,i,<span class="st">&quot;.rds&quot;</span>)) </span>
<span id="cb31-14"><a href="pronto.html#cb31-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Save the script as <code>run_parallel_save.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="pronto.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb32-2"><a href="pronto.html#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="pronto.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb32-4"><a href="pronto.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=10</span></span>
<span id="cb32-5"><a href="pronto.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=2G </span></span>
<span id="cb32-6"><a href="pronto.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:15:00</span></span>
<span id="cb32-7"><a href="pronto.html#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="pronto.html#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb32-9"><a href="pronto.html#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb32-10"><a href="pronto.html#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb32-11"><a href="pronto.html#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="pronto.html#cb32-12" aria-hidden="true" tabindex="-1"></a>export R_LIBS_USER<span class="ot">=</span><span class="er">/</span>work<span class="sc">/</span>LAS<span class="sc">/</span>csafe<span class="sc">-</span>lab<span class="sc">/</span>your_netid<span class="sc">/</span>Rlibs</span>
<span id="cb32-13"><a href="pronto.html#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="pronto.html#cb32-14" aria-hidden="true" tabindex="-1"></a>module load r</span>
<span id="cb32-15"><a href="pronto.html#cb32-15" aria-hidden="true" tabindex="-1"></a>cd <span class="sc">/</span>work<span class="sc">/</span>LAS<span class="sc">/</span>csafe<span class="sc">-</span>lab<span class="sc">/</span>your_netid</span>
<span id="cb32-16"><a href="pronto.html#cb32-16" aria-hidden="true" tabindex="-1"></a>R <span class="sc">--</span>save <span class="sc">&lt;</span> run_parallel_save.R</span></code></pre></div>
<p>Save the file as <code>parallel_save.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix parallel_save.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="pronto.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/parallel_save.txt</span></code></pre></div></li>
<li><p>There should be ten rds files names sample_1.rds, sample_2.rds, etc. in your csafe-lab folder.</p></li>
</ol>
</div>
<div id="ex-log" class="section level3 hasAnchor" number="5.5.9">
<h3><span class="header-section-number">5.5.9</span> Example: Create a log file<a href="pronto.html#ex-log" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this example we will create a simple log file using the <code>futile.logger</code> package.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Open your csafe-lab work folder <code>prontodtn.las.iastate.edu &gt; work &gt; LAS &gt; csafe-lab &gt; your_netid</code> (see <a href="pronto.html#prontodtn">5.2</a>)</p></li>
<li><p>Create a new R script with the following lines of code:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="pronto.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(futile.logger)</span>
<span id="cb34-2"><a href="pronto.html#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="pronto.html#cb34-3" aria-hidden="true" tabindex="-1"></a>futile.logger<span class="sc">::</span><span class="fu">flog.appender</span>(<span class="fu">appender.file</span>(<span class="st">&quot;log_file.txt&quot;</span>), <span class="at">name=</span><span class="st">&#39;log&#39;</span>)</span>
<span id="cb34-4"><a href="pronto.html#cb34-4" aria-hidden="true" tabindex="-1"></a>futile.logger<span class="sc">::</span><span class="fu">flog.info</span>(<span class="st">&quot;start script...&quot;</span>, <span class="at">name=</span><span class="st">&#39;log&#39;</span>)</span>
<span id="cb34-5"><a href="pronto.html#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="pronto.html#cb34-6" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb34-7"><a href="pronto.html#cb34-7" aria-hidden="true" tabindex="-1"></a>futile.logger<span class="sc">::</span><span class="fu">flog.info</span>(<span class="st">&quot;variable a = %d&quot;</span>, a, <span class="at">name=</span><span class="st">&#39;log&#39;</span>)</span></code></pre></div>
<p>Save the script as <code>log.R</code>. Copy the script to your csafe-lab work folder.</p></li>
<li><p>Create a text file for Slurm with the following text:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="pronto.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb35-2"><a href="pronto.html#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="pronto.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --nodes=1 # request one node</span></span>
<span id="cb35-4"><a href="pronto.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=10  # ask for 10 cpu</span></span>
<span id="cb35-5"><a href="pronto.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=1G #  asks for 1 GB of RAM</span></span>
<span id="cb35-6"><a href="pronto.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=00:30:02 # ask that the job be allowed to run for 30 minutes and 2 seconds.</span></span>
<span id="cb35-7"><a href="pronto.html#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="pronto.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># everything below this line is optional</span></span>
<span id="cb35-9"><a href="pronto.html#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=/work/LAS/csafe-lab/your_netid/job_%J_out.txt # store console output</span></span>
<span id="cb35-10"><a href="pronto.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --error=/work/LAS/csafe-lab/your_netid/job_%J_err.txt # store error messages</span></span>
<span id="cb35-11"><a href="pronto.html#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="pronto.html#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">R_LIBS_USER</span><span class="op">=</span>/work/LAS/csafe-lab/your_netid/Rlibs</span>
<span id="cb35-13"><a href="pronto.html#cb35-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-14"><a href="pronto.html#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="ex">module</span> load r</span>
<span id="cb35-15"><a href="pronto.html#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /work/LAS/csafe-lab/your_netid</span>
<span id="cb35-16"><a href="pronto.html#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> <span class="at">--save</span> <span class="op">&lt;</span> log.R</span></code></pre></div>
<p>Save the file as <code>log.txt</code>.</p></li>
<li><p>(Windows Only) If you are using Windows, your text file will likely have DOS line breaks instead of UNIX line breaks which will cause an error when the file is run on Pronto. Open Terminal in RStudio, use <code>cd folder/containing/text_file</code> to change directories to the folder containing your text file, and type <code>dos2unix log.txt</code> to change the line breaks to UNIX format.</p></li>
<li><p>Copy the text file to your csafe-lab work folder.</p></li>
<li><p>In the command line prompt where you are connected to Pronto, type</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="pronto.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sbatch /work/LAS/csafe-lab/your_netid/log.txt</span></code></pre></div></li>
<li><p>A log file called <code>log_file.txt</code> should appear in your csafe-lab work folder. The contents of the log should look like</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="pronto.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">INFO</span> [2022-05-04 10:42:37] start script...</span>
<span id="cb37-2"><a href="pronto.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">INFO</span> [2022-05-04 10:42:37] variable a = 5</span></code></pre></div></li>
</ol>
</div>
</div>
<div id="pronto-commands" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Pronto Commands<a href="pronto.html#pronto-commands" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="list-loaded-modules" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> List loaded modules<a href="pronto.html#list-loaded-modules" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>In an interactive session, type</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="pronto.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> module list</span></code></pre></div></li>
</ol>
</div>
<div id="purge-all-loaded-modules" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Purge all loaded modules<a href="pronto.html#purge-all-loaded-modules" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>In an interactive session, type</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="pronto.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> module purge</span></code></pre></div></li>
</ol>
</div>
<div id="view-your-jobs-in-the-pronto-queue" class="section level3 hasAnchor" number="5.6.3">
<h3><span class="header-section-number">5.6.3</span> View your job(s) in the Pronto queue<a href="pronto.html#view-your-jobs-in-the-pronto-queue" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>In pronto terminal (not in an interactive session), type</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="pronto.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> squeue <span class="at">-u</span> your-netid</span></code></pre></div></li>
</ol>
</div>
<div id="cancel-a-job" class="section level3 hasAnchor" number="5.6.4">
<h3><span class="header-section-number">5.6.4</span> Cancel a job<a href="pronto.html#cancel-a-job" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>In pronto terminal (not in an interactive session), type</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="pronto.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> scancel jobid</span></code></pre></div>
<p>where jobid is the six-digit number for the job you want to cancel.</p></li>
</ol>
</div>
</div>
<div id="install-the-handwriter-package" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Install the handwriter package<a href="pronto.html#install-the-handwriter-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>CSAFE created an R package for statistical handwriting analysis called handwriter. The handwriter package requires a number of other R packages, some of which caused errors when I tried to install handwriter in an interactive session on Pronto following the instructions in <a href="pronto.html#ex-interactive-install">5.4.2</a>. ResearchIT helped me figure out how to install the problem packages and ultimately install handwriter. This section records the step-by-step details of how I was able to install handwriter. My hope is that you will also be able to sucessfully install handwriter if you follow these steps. If you run into problems, email <a href="mailto:researchit@iastate.edu" class="email">researchit@iastate.edu</a>.</p>
<ol style="list-style-type: decimal">
<li><p>If you are off campus, connect to the ISU VPN (see <a href="#signin-vpn"><strong>??</strong></a>)</p></li>
<li><p>Sign-in to Pronto (see <a href="pronto.html#pronto">5</a>).</p></li>
<li><p>Some of the packages used by handwriter are only available on Pronto for R 4.0.4. Start the R 4.0.4 interpreter in an interactive session on Pronto.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="pronto.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> srun <span class="at">--nodes</span> 1 <span class="at">--tasks</span> 4 <span class="at">--partition</span> interactive <span class="at">--time</span> 01:00:00 <span class="at">--pty</span> bash</span>
<span id="cb42-2"><a href="pronto.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> module purge</span>
<span id="cb42-3"><a href="pronto.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> module load gcc/10.2.0-zuvaafu</span>
<span id="cb42-4"><a href="pronto.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> module load r/4.0.4-py3-4khjixy</span>
<span id="cb42-5"><a href="pronto.html#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> R</span></code></pre></div></li>
<li><p>Try to install the handwriter package</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="pronto.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> install.packages<span class="kw">(</span><span class="st">&quot;handwriter&quot;</span><span class="ex">,lib=</span><span class="st">&quot;/work/LAS/csafe-lab/your_netid/Rlibs&quot;</span><span class="ex">,</span> repos=<span class="st">&quot;https://mirror.las.iastate.edu/CRAN&quot;</span><span class="kw">)</span></span></code></pre></div>
<p>I received error messages stating that the packages igraph, randomForest, and magick could not be installed. I had to install these packages separately.</p></li>
<li><p>Install igraph</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="pronto.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> install.packages<span class="kw">(</span><span class="st">&quot;igraph&quot;</span><span class="ex">,lib=</span><span class="st">&quot;/work/LAS/csafe-lab/your_netid/Rlibs&quot;</span><span class="ex">,</span> repos=<span class="st">&quot;https://mirror.las.iastate.edu/CRAN&quot;</span><span class="kw">)</span></span></code></pre></div></li>
<li><p>Then randomForest</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="pronto.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> install.packages<span class="kw">(</span><span class="st">&quot;https://cran.r-project.org/src/contrib/Archive/randomForest/randomForest_4.6-14.tar.gz&quot;</span><span class="ex">,</span> repos=NULL, type=<span class="st">&quot;source&quot;</span>,lib=<span class="st">&quot;/work/LAS/csafe-lab/your_netid/Rlibs&quot;</span><span class="kw">)</span></span></code></pre></div></li>
<li><p>Install magick</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="pronto.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> install.packages<span class="kw">(</span><span class="st">&quot;magick&quot;</span><span class="ex">,</span> </span>
<span id="cb46-2"><a href="pronto.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="ex">configure.vars=c</span><span class="er">(</span><span class="st">&quot;INCLUDE_DIR=&#39;. -D_GLIBCXX_USE_CXX11_ABI=0 -fopenmp -DMAGICKCORE_HDRI_ENABLE=1 -DMAGICKCORE_QUANTUM_DEPTH=16 -I/opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/image-magick-7.0.5-9-6xplmhr3zv6pu2frzsuyof2coe4tuguh/include/ImageMagick-7&#39; LIB_DIR=&#39;. -D_GLIBCXX_USE_CXX11_ABI=0 -Wl,-rpath,/opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/image-magick-7.0.5-9-6xplmhr3zv6pu2frzsuyof2coe4tuguh/lib -L/opt/rit/spack-app/linux-rhel7-x86_64/gcc-4.8.5/image-magick-7.0.5-9-6xplmhr3zv6pu2frzsuyof2coe4tuguh/lib -lMagick++-7.Q16HDRI -lMagickWand-7.Q16HDRI -lMagickCore-7.Q16HDRI #&#39;&quot;</span><span class="kw">)</span><span class="ex">,</span></span>
<span id="cb46-3"><a href="pronto.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="va">lib</span><span class="op">=</span><span class="st">&quot;/work/LAS/csafe-lab/your_netid/Rlibs&quot;</span>,</span>
<span id="cb46-4"><a href="pronto.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="va">repos</span><span class="op">=</span><span class="st">&quot;https://mirror.las.iastate.edu/CRAN&quot;</span><span class="kw">)</span></span></code></pre></div></li>
</ol>
</div>
<div id="trouble-shooting-1" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Trouble-Shooting<a href="pronto.html#trouble-shooting-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="ex-line-breaks" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Line breaks error<a href="pronto.html#ex-line-breaks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are using Windows and you try to run a text file created on Windows on Pronto, you will likely get the following error:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="pronto.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sbatch:</span> error: Batch script contains DOS line breaks <span class="er">(</span><span class="ex">\\r\\n</span><span class="kw">)</span></span>
<span id="cb47-2"><a href="pronto.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">sbatch:</span> error: instead of expected UNIX line breaks <span class="er">(</span><span class="ex">\\n</span><span class="kw">)</span><span class="bu">.</span></span></code></pre></div>
<p>One way to fix the problem is to
- Open Rstudio
- Go to Tools &gt; Terminal &gt; New Terminal
- Changes the directory to the folder containing basic.txt by typing ‘cd /documents/my/folder’ without the quotes and hitting enter.
- Type ‘dos2unix basic.txt’ without the quotes and hit enter.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rstudio-server.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/05-pronto.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
